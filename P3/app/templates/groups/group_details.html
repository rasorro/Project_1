{% extends 'base.html' %}

{% block header %}
  <h1>{{ group.Name }}</h1>
{% endblock %}

{% block content %}
  <p><strong>Category:</strong> {{ group.CategoryName }}</p>
  <p><strong>Description:</strong> {{ group.Description or "No description provided." }}</p>
  <p><strong>Skill Level:</strong> {{ group.SkillLevel or "Not specified" }}</p>
  <p><strong>College Affiliation:</strong> {{ "Yes" if group.AffiliatedWithCollege else "No" }}</p>
  {% if group.College %}
    <p><strong>College:</strong> {{ group.College }}</p>
  {% endif %}
  <p><strong>Requires Dues:</strong> {{ "Yes" if group.RequiresDues else "No" }}</p>
  {% if group.Website %}
    <p><strong>Website:</strong> <a href="{{ group.Website }}" target="_blank">{{ group.Website }}</a></p>
  {% endif %}
  {% if group.Email %}
    <p><strong>Contact Email:</strong> <a href="mailto:{{ group.Email }}">{{ group.Email }}</a></p>
  {% endif %}
  {% if group.ContactName %}
    <p><strong>Contact Name:</strong> {{ group.ContactName }}</p>
  {% endif %}
  {% if group.Address %}
    <p><strong>Address:</strong> {{ group.Address }}</p>
  {% endif %}

  <hr>

  {% if user_role == 'organizer' %}
    <p><strong>You are an organizer of this group.</strong></p>
  {% elif is_member %}
    <p><strong>You are a member of this group.</strong></p>
    <form action="{{ url_for('groups.leave_group', group_id=group.ID) }}" method="post">
      <button type="submit" onclick="return confirm('Leave this group?')">Leave Group</button>
    </form>
  {% else %}
    <form action="{{ url_for('groups.join_group', group_id=group.ID) }}" method="post">
      <button type="submit">Join Group</button>
    </form>
  {% endif %}

  <hr>

  <h2>Upcoming Events</h2>
  {% if events %}
    <ul>
      {% for event in events %}
        <li>
          <a href="{{ url_for('events.event_details', event_id=event.EventID) }}">{{ event.Name }}</a><br>
          {{ event.Date }} {{ event.StartTime or "TBD" }} - {{ event.EndTime or "TBD" }}<br>
          {{ event.Location or "No location" }}
        </li>
      {% endfor %}
    </ul>
  {% else %}
    <p>No upcoming events.</p>
  {% endif %}

  <hr>

  <h2>Members</h2>
  {% if members %}
    <ul>
      {% for member in members %}
        <li>
          {{ member.Name }} ({{ member.Role }}) - joined {{ member.JoinDate }}
          {% if member.Email %}
            - <a href="mailto:{{ member.Email }}">{{ member.Email }}</a>
          {% endif %}
        </li>
      {% endfor %}
    </ul>
  {% else %}
    <p>No members yet.</p>
  {% endif %}

  <p><a href="{{ url_for('groups.my_groups') }}">‚Üê Back to My Groups</a></p>
{% endblock %}
